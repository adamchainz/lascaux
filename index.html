<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5, width=640, minimum-scale=0.5">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Lascaux - Print high resolution maps from the web</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.simplex.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
      <script src="/js/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="/css/leaflet.css" />
  </head>

  <body>
    <div class="container">
      <div class='col-md-10 col-md-offset-1'>

        <h1>
          Lascaux
          <small>Print high resolution maps from the web</small>
        </h1>
        <hr />
        <p>Configure your map below:</p>

        <form role="form" class="form-horizontal">
          <div class="form-group">
            <label for="overlay_tiles" class="col-sm-2 control-label">Data source</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="overlay_tiles" placeholder="http://a.tiles.mapbox.com/v3/datamade.hnmob3j3/{z}/{x}/{y}.png">
              <p class="help-block">URL to a TileJSON source</p>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Base map</label>
            <div class="col-sm-10">
              <div class="radio">
                <label>
                  <input type="radio" name="base_tiles_option" id="base_tiles_1" value="http://a.tile.openstreetmap.org/{z}/{x}/{y}.png" checked="checked"> Open Street Map
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="base_tiles_option" id="base_tiles_2" value="http://a.tiles.mapbox.com/v3/datamade.hnmob3j3/{z}/{x}/{y}.png"> Streets by MapBox
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="base_tiles_option" id="base_tiles_3" value="http://a.tiles.mapbox.com/v3/datamade.k92mcmc8/{z}/{x}/{y}.png"> Satellite by MapBox 
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="base_tiles_option" id="base_tiles_4" value="http://a.tile.stamen.com/toner/{z}/{x}/{y}.png"> Toner by Stamen
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="base_tiles_option" id="base_tiles_5" value="http://a.tile.stamen.com/terrain/{z}/{x}/{y}.jpg"> Terrain by Stamen
                </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="dimensions" class="col-sm-2 control-label">Size</label>
            <div class="col-sm-3">
              <select class="form-control" id="dimensions">
                <option value='1275,1650'>Letter 8 1/2" by 11"</option>
                <option value='2550,3300'>Tabloid 11" x 17"</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="zoom" class="col-sm-2 control-label">Zoom</label>
            <div class="col-sm-2">
              <input type="number" class="form-control" value="17" id="zoom" />
            </div>
          </div>
          <div class="form-group">
            <label for="center" class="col-sm-2 control-label">Map center</label>
            <div class="col-sm-3">
              <input type="text" class="form-control" id="center" placeholder="-87.757833,41.879087">
            </div>
          </div>
          <div class="form-group">
            <div class='col-sm-5 col-sm-offset-2'>
              <button id="submit-download" type="submit" class="btn btn-info btn-lg">Download PDF</button>
            </div>
          </div>
        </form>

        <div class="footer">
          <p>&copy; <a href='http://datamade.us'>DataMade</a> and <a href='http://lisc-chicago.org'>LISC Chicago</a> | <a href='https://github.com/datamade/lascaux'><i class='icon-github'></i> Pull requests welcome!</a></p>
        </div>
      </div>
    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/moment.min.js"></script>
    <script src="/js/leaflet.js?1"></script>
    <!-- <script src="/static/js/analytics_lib.js"></script> -->

    <script>
      $(function() {

        $("#submit-download").on("click", function(e){
          e.preventDefault();

          var params = {
            overlay_tiles: $("#overlay_tiles").val(),
            base_tiles: $("input:radio[name=base_tiles_option]:checked").val(),
            dimensions: $("#dimensions").val(),
            zoom: $("#zoom").val(),
            center: $("#center").val()
          }

          // console.log(params);
          // console.log($.param(params))

          var download_url = "http://lascaux.datamade.us/?" + $.param(params)
          window.open(download_url)
        });
      });
    </script>

  </body>
</html>